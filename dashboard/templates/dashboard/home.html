<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Minecraft Server Dashboard</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 24px; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #ddd; padding: 10px; vertical-align: top; }
      th { text-align: left; background: #f6f6f6; }
      .running { color: #0a7; font-weight: 600; }
      .stopped { color: #a00; font-weight: 600; }
      form { display: inline; }
      button { padding: 6px 10px; cursor: pointer; }
    </style>
  </head>
  <body>
    <h1>Minecraft Server Dashboard</h1>

    {% if messages %}
      <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Status</th>
          <th>Ports</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for s in servers %}
          <tr>
            <td>{{ s.name }}</td>
            <td>{{ s.mc_type }}</td>
            <td>
              {% if s.is_running %}
                <span class="running">{{ s.status }}</span>
              {% else %}
                <span class="stopped">{{ s.status }}</span>
              {% endif %}
            </td>
            <td>
              {% if s.ports %}
                <ul>
                  {% for p in s.ports %}
                    <li>{{ p }}</li>
                  {% endfor %}
                </ul>
              {% else %}
                (no ports)
              {% endif %}
            </td>
            <td>
              {% if s.is_running %}
                <form method="post" action="{% url 'server_stop' s.id %}">
                  {% csrf_token %}
                  <button type="submit">Stop</button>
                </form>
              {% else %}
                <form method="post" action="{% url 'server_start' s.id %}">
                  {% csrf_token %}
                  <button type="submit">Start</button>
                </form>
              {% endif %}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5">No Minecraft containers found (label mc.platform=true).</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>

